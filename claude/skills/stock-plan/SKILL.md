---
name: stock-plan
description: "Accumulate execution plans by asking detailed questions"
---

# stock-plan: 実行計画蓄積コマンド

ユーザーの要求を整理し、実行計画としてファイルに保存します。

## 動作フロー

### 1. 要件ヒアリング
AskUserQuestionツールを使って、以下の項目を**順番に**質問します：

1. **タスク記述**: 何をしたいか、目的は何か
2. **実現方法**: 変更すべきファイル、コードパス、実装アプローチ
3. **受入条件**: 完了条件、テスト基準、成功の定義
4. **依存関係**: 前提となるタスク、ブロッカー、順序

各質問は具体的に、回答しやすい形式で行ってください。

### 2. プランファイル作成

回答を元に、以下の形式でプランファイルを作成：

**ファイル名**: `plans/yyyymmdd-hhmm-title.md`
- 日時: 現在時刻（例: `20260111-1430`）
- title: タスクを3-5単語で要約（kebab-case）

**内容フォーマット**:
```markdown
# [タスクタイトル]

作成日時: YYYY-MM-DD HH:MM

## タスク記述
（何をしたいか、目的）

## 実現方法
- 変更ファイル: xxx
- コードパス: yyy
- アプローチ: zzz

## 受入条件
- [ ] 条件1
- [ ] 条件2
- [ ] 条件3

## 依存関係
- 前提: xxx（なければ「なし」）
- ブロッカー: yyy（なければ「なし」）

## 備考
（その他重要な情報があれば）
```

### 3. plan.md更新

`plans/plan.md` にプランをリストとして追加：

```markdown
- [ ] [yyyymmdd-hhmm-title](./yyyymmdd-hhmm-title.md) - タスク概要
```

#### 初回実行時の処理
- `plans/` ディレクトリが存在しない場合、作成
- `plan.md` が存在しない場合、以下の内容で作成：

```markdown
# Plan List

- [ ] [example](./example.md) - 例
```

### 4. 完了メッセージ

プランファイル作成後、ユーザーに以下を通知：
- 作成したファイルパス
- タスク概要
- `/execute-plan [filename]` で実行可能であること

## 制約事項
- 実装は一切行わない（計画の蓄積のみ）
- 必ず4項目すべてをヒアリングする
- プランファイルは必ず指定フォーマットに従う
